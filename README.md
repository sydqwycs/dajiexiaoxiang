# å¤§è¡—å°å··é€‰æ‹©ç³»ç»Ÿ

ä¸€ä¸ªç®€å•ã€ç¾è§‚ã€æ˜“ç”¨çš„åœ¨çº¿é€‰æ‹©æŠ•ç¥¨å¹³å°ï¼Œéƒ¨ç½²åœ¨ Zeabur å¹³å°ï¼Œç¡®ä¿åœ¨ä¸­å›½å¯è®¿é—®ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

### ç”¨æˆ·ç«¯
- ğŸ“Š æŸ¥çœ‹å½“å‰è¿›è¡Œä¸­çš„é€‰æ‹©æ´»åŠ¨
- âœ… å‚ä¸é€‰æ‹©å¹¶æäº¤æŠ•ç¥¨
- ğŸ“ˆ æŸ¥çœ‹å®æ—¶æŠ•ç¥¨ç»“æœ
- ğŸ“œ æµè§ˆå†å²é€‰æ‹©è®°å½•
- ğŸŒ¸ ç²¾ç¾çš„èŠ±æœµåŠ¨ç”»ç‰¹æ•ˆ

### ç®¡ç†ç«¯
- ğŸ” éšè—çš„ç®¡ç†åå°ï¼ˆè·¯å¾„ï¼š`/sydqwy`ï¼‰
- â• åˆ›å»ºæ–°çš„é€‰æ‹©æ´»åŠ¨
- âœï¸ ä¿®æ”¹ç°æœ‰é€‰æ‹©
- ğŸ—‘ï¸ åˆ é™¤é€‰æ‹©æ´»åŠ¨
- ğŸ“‹ æŸ¥çœ‹æ‰€æœ‰é€‰æ‹©åˆ—è¡¨

## æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js + Express + TypeScript
- **æ•°æ®åº“**: PostgreSQL
- **è®¤è¯**: JWT
- **éƒ¨ç½²**: Zeabur

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

\`\`\`bash
npm install
\`\`\`

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` åˆ° `.env` å¹¶é…ç½®ï¼š

\`\`\`env
DATABASE_URL=postgresql://user:password@localhost:5432/dajiexianxiang
ADMIN_PASSWORD_HASH=e42424a90c0a85e9f9ccfbafaff886a334f91a503a8a2d3f359b3f1ec1deb898
JWT_SECRET=your-secret-key-change-in-production
PORT=3000
NODE_ENV=development
\`\`\`

### 3. è¿è¡Œæ•°æ®åº“è¿ç§»

\`\`\`bash
npm run migrate
\`\`\`

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

\`\`\`bash
npm run dev
\`\`\`

### 5. è®¿é—®åº”ç”¨

- ç”¨æˆ·ç•Œé¢: http://localhost:3000
- ç®¡ç†åå°: http://localhost:3000/sydqwy

## ç®¡ç†å‘˜ä¿¡æ¯

- **ç®¡ç†åå°è·¯å¾„**: `/sydqwy`
- **é»˜è®¤å¯†ç **: `o-Q>3WK..@Y[XFplt10OHsGfkU,Ws;2K`
- **å¯†ç å“ˆå¸Œ**: `e42424a90c0a85e9f9ccfbafaff886a334f91a503a8a2d3f359b3f1ec1deb898`

## æµ‹è¯•

\`\`\`bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test:unit

# è¿è¡Œå±æ€§æµ‹è¯•
npm run test:property

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
\`\`\`

## éƒ¨ç½²åˆ° Zeabur

1. æ¨é€ä»£ç åˆ° Git ä»“åº“
2. åœ¨ Zeabur åˆ›å»ºæ–°é¡¹ç›®
3. æ·»åŠ  PostgreSQL æœåŠ¡
4. è¿æ¥ Git ä»“åº“
5. é…ç½®ç¯å¢ƒå˜é‡
6. è¿è¡Œæ•°æ®åº“è¿ç§»
7. éƒ¨ç½²å®Œæˆï¼

## é¡¹ç›®ç»“æ„

\`\`\`
dajiexianxiang-choice/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ router.ts             # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ db.ts                 # æ•°æ®åº“è¿æ¥æ± 
â”‚   â”œâ”€â”€ types.ts              # TypeScript ç±»å‹
â”‚   â”œâ”€â”€ static-content.ts     # é™æ€ HTML/JS
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ auth.ts           # JWT è®¤è¯
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ voting-service.ts # æŠ•ç¥¨æœåŠ¡
â”‚   â”‚   â””â”€â”€ admin-service.ts  # ç®¡ç†æœåŠ¡
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ ip-extractor.ts   # IP æå–
â”œâ”€â”€ migrations/               # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ scripts/                  # å·¥å…·è„šæœ¬
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ package.json
\`\`\`

## å®‰å…¨ç‰¹æ€§

- IP åœ°å€æŠ•ç¥¨é™åˆ¶
- JWT ä»¤ç‰Œè®¤è¯
- SHA-256 å¯†ç å“ˆå¸Œ
- å‚æ•°åŒ– SQL æŸ¥è¯¢
- CORS ä¿æŠ¤

## è®¸å¯è¯

MIT

## ä½œè€…

å¤§è¡—å°å··å›¢é˜Ÿ

---

Â© 2026 å¤§è¡—å°å··
